{% extends "layout.html" %}
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>


{% block title %}
Portfolio
{% endblock %}

{% block main %}
<h1>{{variables[2]}}</h1>

    <div style="display: flex; ">
        <form id="compare" method="POST" style="width: 100%; text-align: left;">
            <div class="mb-3" style="width: 100%; flex: auto;">
                <input autocomplete="off" autofocus="" class="form-control w-auto" name="Monthly" placeholder="Monthly Investments" type="number">
                <input autocomplete="off" autofocus="" class="form-control w-auto" name="Year" placeholder="Year" type="number">
                <input autocomplete="off" autofocus="" class="form-control w-auto" name="NSimulations" placeholder="Number of Simulations" type="number">
                <input autocomplete="off" autofocus="" class="form-control w-auto" name="future" placeholder="How Many Future Years" type="number">
            </div>
            <button class="btn btn-primary" type="submit">Calculate</button>
        </form>
    </div>

    <div class="graph_line">

        <div class="chart-container" style="position: relative; height:40vh; width: 50%; padding-right: 50px;">
            <canvas id= "lineChart" width="700" height="400" style="display: block; margin-left: auto;"></canvas>
                <script>
                    document.addEventListener("DOMContentLoaded", function () {

                        var ctx = document.getElementById("lineChart").getContext("2d");
                        var lineChart = new Chart(ctx, {
                            type: "line",

                            data: {
                                labels: {{ variables[2] | safe }},
                                datasets: [{
                                    label: {{ variables[2] | tojson}},
                                    data: {{ variables[1] | safe }},
                                    fill: false,
                                    borderColor: "rgb(75, 192, 192)",
                                    backgroundColor: "#353535",
                                    pointRadius: 0, // Aumenta os pontos para melhor visualização da tooltip
                                    lineTension: 0.4,
                                }
                                {% if variables[3] is not none %},
                                {
                                    label: {{ variables[2] | tojson}},
                                    data: {{ variables[3] | safe }},
                                    fill: false,
                                    borderColor: "rgb(192, 75, 192)",
                                    backgroundColor: "#353535",
                                    pointRadius: 0, // Aumenta os pontos para melhor visualização da tooltip
                                    lineTension: 0.4,
                                }
                                {% endif %}
                                ]
                            },

                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                spanGaps: true,
                                hover: {
                                    mode: 'index',
                                    intersect: false, // Permite hover ao longo do eixo X
                                },
                            }
                        });
                    });
                </script>
        </div>
    </div>
{% endblock %}